<?xml version="1.0" encoding="UTF-8"?>
<sspaceex xmlns="http://www-verimag.imag.fr/xml-namespaces/sspaceex" version="0.2" math="SpaceEx">
<component id="system">
<param name="friction" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="slope" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="AeroDrag" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="a_env" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="RandomActorX_env" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="RandomActorY_env" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="signal_env" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="err" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="acc" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="dec" type="real" local="false" d1="1" d2="1" dynamics="uncontrolled" />
<param name="x_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="v_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="y_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="angle_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="theta_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="restrictedSignalAreaX_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="staticActorX_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="staticActorY_env" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="Mass" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="Length" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="Period" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="CRotInert" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="Amax" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="CRollResis" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="frictionsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="slopesample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="errorsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="x_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="x_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="y_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="v_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="angle_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="staticActorX_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="staticActorY_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="RandomActorX_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="RandomActorY_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="restrictedSignalAreaX_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="signal_envsample" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="control_theta_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="D" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="dc" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="dt" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="dsafe" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="dd" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="danger" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="control_a_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="action" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="a_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="theta_ego" type="real" local="false" d1="1" d2="1" dynamics="controlled" />
<param name="t" type="real" local="false" d1="1" d2="1" dynamics="controlled" />

<location id="0" name="init">
<invariant>
t&lt;0.03 
</invariant>
<flow>
t'=1   &amp;  x_env'=v_env   &amp;   v_env'=a_env   &amp;  x_ego'=v_ego  &amp;  v_ego'=a_ego 
</flow>
</location>

<location id="1" name="init3,CACCs,init1">
<invariant>
 t&lt;0.05 
</invariant>
<flow>
t'=1   &amp;  x_env'=v_env   &amp;   v_env'=a_env   &amp;  x_ego'=v_ego  &amp;  v_ego'=a_ego 
</flow>
</location>

<location id="2" name="init3,SP,init1">
<invariant>
 t&lt;0.06 
</invariant>
<flow>
t'=1   &amp;  x_env'=v_env   &amp;   v_env'=a_env   &amp;  x_ego'=v_ego  &amp;  v_ego'=a_ego 
</flow>
</location>

<location id="3" name="init3,ST,init1">
<invariant>
 t&lt;Period
</invariant>
<flow>
t'=1   &amp;  x_env'=v_env   &amp;   v_env'=a_env   &amp;  x_ego'=v_ego  &amp;  v_ego'=a_ego 
</flow>
</location>


<transition source="0" target="1">
<label>sampling_sampl</label>
<guard> t gt; 0.01 &amp; t lt; 0.03</guard>
<assignment>
frictionsample := friction &amp; slopesample:=slope &amp; errorsample:=err &amp; staticActorX_envsample:=staticActorX_env &amp; staticActorY_envsample:=staticActorY_env &amp; RandomActorX_envsample:=RandomActorX_env &amp; RandomActorY_envsample:=RandomActorY_env &amp; restrictedSignalAreaX_envsample:=restrictedSignalAreaX_env &amp; signal_envsample:=signal_env &amp; x_envsample:=x_env
</assignment>
</transition>

<transition source="1" target="2">
<label>controlspeed_cmd</label>
<guard> t gt; 0.04 &amp; t lt; 0.05</guard>
<assignment>
dd := (x_envsample-x_ego+errorsample) &amp; danger := sign(-(abs(staticActorX_envsample -x_ego)-0.5))*sign(-(abs(staticActorY_envsample -y_ego)-0.5)) * (1)+sign(-(abs(RandomActorX_envsample -x_ego)-0.5))*sign(-(abs(RandomActorY_envsample -y_ego)-0.5)) * (1)+sign(-(abs(restrictedSignalAreaX_envsample)-0.5))*sign(signal_envsample -0.5) * (1) &amp; control_a_ego := sign(danger) * (-3-10*0.01*frictionsample*cos(slopesample))+signEq(-(danger))*sign(dd-20) * (acc-10*0.01*frictionsample*cos(slopesample))+signEq(-(danger))*sign(-(dd-20)) * (dec-10*0.01*frictionsample*cos(slopesample)) &amp; action := sign(control_a_ego ) * (1)+sign(-(control_a_ego )) * (-1)&amp;a_ego:= control_a_ego
</assignment>
</transition>

<transition source="2" target="3">
<label>steer_cmd</label>
<guard> t gt; 0.05 &amp; t lt; 0.06</guard>
<assignment>
control_theta_ego:=0&amp;theta_ego:= control_theta_ego
</assignment>
</transition>

<transition source="3" target="0">
<label>updateControlRound_sync</label>
<guard>t==Period</guard>
<assignment>
t:=0
</assignment>
</transition>

</component>
</sspaceex>
